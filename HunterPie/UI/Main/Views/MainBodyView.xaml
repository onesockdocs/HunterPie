<UserControl x:Class="HunterPie.UI.Main.Views.MainBodyView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:buttons="clr-namespace:HunterPie.UI.Controls.Buttons;assembly=HunterPie.UI"
             xmlns:converters="clr-namespace:HunterPie.UI.Architecture.Converters;assembly=HunterPie.UI"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:effects="clr-namespace:HunterPie.UI.Controls.Effects;assembly=HunterPie.UI"
             xmlns:enums="clr-namespace:HunterPie.Core.Client.Configuration.Enums;assembly=HunterPie.Core"
             xmlns:feedback="clr-namespace:HunterPie.UI.Controls.Feedback;assembly=HunterPie.UI"
             xmlns:image="clr-namespace:HunterPie.UI.Controls.Image;assembly=HunterPie.UI"
             xmlns:markup="clr-namespace:HunterPie.UI.Architecture.Markup;assembly=HunterPie.UI"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:presentation="clr-namespace:HunterPie.UI.Main.Presentation"
             xmlns:viewModels="clr-namespace:HunterPie.UI.Main.ViewModels"
             xmlns:views="clr-namespace:HunterPie.UI.SideBar.Views"
             d:DataContext="{d:DesignInstance viewModels:MainBodyViewModel}"
             d:DesignHeight="450"
             d:DesignWidth="800"
             mc:Ignorable="d">
	<UserControl.Resources>
		<presentation:NavigationDataTemplateSelector x:Key="NavigationDataTemplateSelector" />
		<converters:GameTypeToGameNameConverter x:Key="GameTypeToGameNameConverter" />
		<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="50" />
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>

		<!--  Content Navigation  -->
		<ContentControl x:Name="PART_NavigationHost"
		                Grid.Row="2"
		                Grid.Column="1"
		                Content="{Binding NavigationViewModel, Mode=OneWay, NotifyOnTargetUpdated=True}"
		                ContentTemplateSelector="{StaticResource NavigationDataTemplateSelector}"
		                RenderTransformOrigin="0.5,0.5"
		                TargetUpdated="OnNavigationTargetUpdated">
			<ContentControl.RenderTransform>
				<ScaleTransform ScaleX="1" ScaleY="1" />
			</ContentControl.RenderTransform>
		</ContentControl>

		<Border Grid.Row="1"
		        Grid.Column="0"
		        Grid.ColumnSpan="2"
		        Height="120"
		        Background="{DynamicResource Brushes.HunterPie.Background.Secondary}">
			<Border.Effect>
				<DropShadowEffect Opacity="0.1" />
			</Border.Effect>
			<Grid>
				<!--  Logo  -->
				<StackPanel Margin="20"
				            HorizontalAlignment="Left"
				            VerticalAlignment="Center"
				            Orientation="Horizontal">
					<image:Icon Width="{Binding ActualHeight, RelativeSource={RelativeSource Self}}"
					            Height="50"
					            Foreground="{DynamicResource Brushes.HunterPie.Foreground.Primary}"
					            Image="{DynamicResource ICON_HUNTERPIE}" />

					<TextBlock Margin="5"
					           VerticalAlignment="Center"
					           FontSize="25"
					           Foreground="{DynamicResource Brushes.HunterPie.Foreground.Primary}">
						<Run FontWeight="Medium"
						     Text="Hunter" /><Run Text="Pie" />
					</TextBlock>
				</StackPanel>

				<!--  Launch Game  -->
				<buttons:ComboButton Height="45"
				                     MinWidth="230"
				                     Margin="20"
				                     HorizontalAlignment="Right"
				                     VerticalAlignment="Center"
				                     Click="OnLaunchButtonClick"
				                     ItemsSource="{Binding Games, Mode=OneTime}"
				                     SelectedValue="{Binding SelectedGame.Value, Mode=TwoWay, Converter={StaticResource GameTypeToGameNameConverter}}">
					<buttons:ComboButton.Content>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="50" />
								<ColumnDefinition Width="1*" />
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="2*" />
								<RowDefinition Height="1*" />
							</Grid.RowDefinitions>

							<TextBlock Grid.Row="0"
							           Grid.RowSpan="2"
							           Grid.Column="0"
							           HorizontalAlignment="Center"
							           VerticalAlignment="Center"
							           FontSize="25"
							           Foreground="{DynamicResource Brushes.HunterPie.Foreground.Secondary}"
							           Text="▶" />
							<TextBlock Grid.Row="0"
							           Grid.Column="1"
							           Margin="0,0,5,0"
							           HorizontalAlignment="Right"
							           VerticalAlignment="Center"
							           d:Text="LAUNCH GAME"
							           FontSize="17"
							           FontWeight="Medium"
							           Foreground="{DynamicResource Brushes.HunterPie.Foreground.Secondary}"
							           Text="{markup:Localization '//Strings/Client/Generics/Generic[@Id=&quot;HUNTERPIE_LAUNCH_GAME&quot;]'}" />
							<TextBlock Grid.Row="1"
							           Grid.Column="1"
							           Margin="0,0,5,0"
							           HorizontalAlignment="Right"
							           VerticalAlignment="Top"
							           d:Text="Monster Hunter: World"
							           FontSize="11"
							           Foreground="{DynamicResource Brushes.HunterPie.Foreground.Tertiary}"
							           Text="{Binding SelectedGame.Value, Mode=OneWay, Converter={StaticResource GameTypeToGameNameConverter}}" />
						</Grid>
					</buttons:ComboButton.Content>
					<buttons:ComboButton.ItemTemplate>
						<DataTemplate DataType="{x:Type enums:GameType}">
							<effects:CursorHighLight>
								<TextBlock Padding="2,5"
								           Cursor="Hand"
								           FontSize="15"
								           Foreground="{DynamicResource Brushes.HunterPie.Foreground.Secondary}"
								           Text="{Binding ., Converter={StaticResource GameTypeToGameNameConverter}}" />
							</effects:CursorHighLight>
						</DataTemplate>
					</buttons:ComboButton.ItemTemplate>
				</buttons:ComboButton>
			</Grid>
		</Border>

		<!--  SideBar  -->
		<views:SideBarView Grid.Row="2"
		                   Grid.Column="0"
		                   Grid.ColumnSpan="2"
		                   HorizontalAlignment="Left"
		                   DataContext="{Binding SideBarViewModel, Mode=OneWay}" />

		<feedback:Prompt Grid.Row="0"
		                 Grid.Column="0"
		                 Grid.ColumnSpan="2"
		                 BorderBrush="{DynamicResource Brushes.HunterPie.Supporter.Border}"
		                 BorderThickness="0,1"
		                 Padding="1"
		                 Background="{DynamicResource Brushes.HunterPie.Supporter.Background}"
		                 CloseClick="OnCloseSupporterFeedback"
		                 Cursor="Hand"
		                 FontSize="13"
		                 Foreground="{DynamicResource Brushes.HunterPie.Foreground.Secondary}"
		                 Icon="{DynamicResource ICON_PATREON}"
		                 IsCloseable="True"
		                 MouseLeftButtonUp="OnBannerClick"
		                 Text="Want to support HunterPie's development and have access to BETA updates? Support the project on Patreon!"
		                 Visibility="{Binding ShouldDisplaySupporterPrompt, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}" />
	</Grid>
</UserControl>
